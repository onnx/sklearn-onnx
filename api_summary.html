
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API Summary &#8212; sklearn-onnx 1.9.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/readable.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-rendered-html.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Gallery of examples" href="auto_examples/index.html" />
    <link rel="prev" title="Converter for pyod.models.iforest.IForest" href="auto_tutorial/plot_wext_pyod_forest.html" />
   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="auto_examples/index.html" title="Gallery of examples"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="auto_tutorial/plot_wext_pyod_forest.html" title="Converter for pyod.models.iforest.IForest"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">sklearn-onnx 1.9.2 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API Summary</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api-summary">
<h1>API Summary<a class="headerlink" href="#api-summary" title="Permalink to this headline">¶</a></h1>
<p>Summary of public functions and classes exposed
in <em>scikit-onnx</em>.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#version" id="id1">Version</a></p></li>
<li><p><a class="reference internal" href="#converters" id="id2">Converters</a></p></li>
<li><p><a class="reference internal" href="#register-a-new-converter" id="id3">Register a new converter</a></p></li>
<li><p><a class="reference internal" href="#manipulate-onnx-graphs" id="id4">Manipulate ONNX graphs</a></p></li>
<li><p><a class="reference internal" href="#parsers" id="id5">Parsers</a></p></li>
<li><p><a class="reference internal" href="#utils-for-contributors" id="id6">Utils for contributors</a></p></li>
<li><p><a class="reference internal" href="#concepts" id="id7">Concepts</a></p>
<ul>
<li><p><a class="reference internal" href="#containers" id="id8">Containers</a></p></li>
<li><p><a class="reference internal" href="#nodes" id="id9">Nodes</a></p></li>
<li><p><a class="reference internal" href="#scope" id="id10">Scope</a></p></li>
<li><p><a class="reference internal" href="#topology" id="id11">Topology</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="version">
<h2><a class="toc-backref" href="#id1">Version</a><a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.get_latest_tested_opset_version">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.</span></span><span class="sig-name descname"><span class="pre">get_latest_tested_opset_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/proto.html#get_latest_tested_opset_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.get_latest_tested_opset_version" title="Permalink to this definition">¶</a></dt>
<dd><p>This module relies on <em>onnxruntime</em> to test every
converter. The function returns the most recent
target opset tested with <em>onnxruntime</em> or the opset
version specified by <em>onnx</em> package if this one is lower
(return by <cite>onnx.defs.onnx_opset_version()</cite>).</p>
</dd></dl>

</div>
<div class="section" id="converters">
<h2><a class="toc-backref" href="#id2">Converters</a><a class="headerlink" href="#converters" title="Permalink to this headline">¶</a></h2>
<p>Both functions convert a <em>scikit-learn</em> model into ONNX.
The first one lets the user manually
define the input’s name and types. The second one
infers this information from the training data.
These two functions are the main entry points to converter.
The rest of the API is needed if a model has no converter
implemented in this package. A new converter has then to be
registered, whether it is imported from another package
or created from scratch.</p>
<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.convert_sklearn">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.</span></span><span class="sig-name descname"><span class="pre">convert_sklearn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc_string</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_opset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_conversion_functions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_shape_calculators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_parsers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intermediate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/convert.html#convert_sklearn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.convert_sklearn" title="Permalink to this definition">¶</a></dt>
<dd><p>This function produces an equivalent ONNX model of the given scikit-learn model.
The supported converters is returned by function
<a class="reference internal" href="#skl2onnx.supported_converters" title="skl2onnx.supported_converters"><code class="xref py py-func docutils literal notranslate"><span class="pre">supported_converters</span></code></a>.</p>
<p>For pipeline conversion, user needs to make sure each component
is one of our supported items.
This function converts the specified <em>scikit-learn</em> model
into its <em>ONNX</em> counterpart.
Note that for all conversions, initial types are required.
<em>ONNX</em> model name can also be specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – A scikit-learn model</p></li>
<li><p><strong>initial_types</strong> – a python list. Each element is a tuple of a variable name
and a type defined in <cite>data_types.py</cite></p></li>
<li><p><strong>name</strong> – The name of the graph (type: GraphProto) in the produced ONNX model (type: ModelProto)</p></li>
<li><p><strong>doc_string</strong> – A string attached onto the produced ONNX model</p></li>
<li><p><strong>target_opset</strong> – number, for example, 7 for ONNX 1.2, and 8 for ONNX 1.3,
if value is not specified, the function will choose the latest tested opset
(see <a class="reference internal" href="#skl2onnx.get_latest_tested_opset_version" title="skl2onnx.get_latest_tested_opset_version"><code class="xref py py-func docutils literal notranslate"><span class="pre">skl2onnx.get_latest_tested_opset_version()</span></code></a>)</p></li>
<li><p><strong>custom_conversion_functions</strong> – a dictionary for specifying the user customized conversion function,
it takes precedence over registered converters</p></li>
<li><p><strong>custom_shape_calculators</strong> – a dictionary for specifying the user customized shape calculator
it takes precedence over registered shape calculators.</p></li>
<li><p><strong>custom_parsers</strong> – parsers determines which outputs is expected for which particular task,
default parsers are defined for classifiers, regressors, pipeline but they can be rewritten,
<em>custom_parsers</em> is a dictionary <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">type:</span> <span class="pre">fct_parser(scope,</span> <span class="pre">model,</span> <span class="pre">inputs,</span> <span class="pre">custom_parsers=None)</span> <span class="pre">}</span></code></p></li>
<li><p><strong>options</strong> – specific options given to converters (see <a class="reference internal" href="parameterized.html#l-conv-options"><span class="std std-ref">Converters with options</span></a>)</p></li>
<li><p><strong>intermediate</strong> – if True, the function returns the converted model and , and <code class="xref py py-class docutils literal notranslate"><span class="pre">Topology</span></code>,
it returns the converted model otherwise</p></li>
<li><p><strong>white_op</strong> – white list of ONNX nodes allowed while converting a pipeline,
if empty, all are allowed</p></li>
<li><p><strong>black_op</strong> – black list of ONNX nodes allowed while converting a pipeline,
if empty, none are blacklisted</p></li>
<li><p><strong>final_types</strong> – a python list. Works the same way as initial_types
but not mandatory, it is used to overwrites the type
(if type is not None) and the name of every output.</p></li>
<li><p><strong>dtype</strong> – removed in version 1.7.5, dtype is now inferred from input types,
converters may add operators Cast to switch to double when it is necessary</p></li>
<li><p><strong>verbose</strong> – display progress while converting a model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An ONNX model (type: ModelProto) which is equivalent to the input scikit-learn model</p>
</dd>
</dl>
<p>Example of <em>initial_types</em>:
Assume that the specified <em>scikit-learn</em> model takes a heterogeneous list as its input.
If the first 5 elements are floats and the last 10 elements are integers,
we need to specify initial types as below. The [None] in [None, 5] indicates
the batch size here is unknown.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">FloatTensorType</span><span class="p">,</span> <span class="n">Int64TensorType</span>
<span class="n">initial_type</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;float_input&#39;</span><span class="p">,</span> <span class="n">FloatTensorType</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="mi">5</span><span class="p">])),</span>
                <span class="p">(</span><span class="s1">&#39;int64_input&#39;</span><span class="p">,</span> <span class="n">Int64TensorType</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="mi">10</span><span class="p">]))]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a pipeline includes an instance of
<a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.compose.ColumnTransformer.html">ColumnTransformer</a>,
<em>scikit-learn</em> allow the user to specify columns by names. This option is not supported
by <em>sklearn-onnx</em> as features names could be different in input data and the ONNX graph
(defined by parameter <em>initial_types</em>), only integers are supported.</p>
</div>
<p>Some ONNX operators exposes parameters <em>sklearn-onnx</em> cannot
guess from the raw model. Some default values are usually suggested
but the users may have to manually overwrite them. This need
is not obvious to do when a model is included in a pipeline.
That’s why these options can be given to function <em>convert_sklearn</em>
as a dictionary <code class="docutils literal notranslate"><span class="pre">{model_type:</span> <span class="pre">parameters</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">dictionary}</span></code> or
<code class="docutils literal notranslate"><span class="pre">{model_id:</span> <span class="pre">parameters</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">dictionary}</span></code>.
Option <em>sep</em> is used to specify the delimiters between two words
when the ONNX graph needs to tokenize a string.
The default value is short and may not include all
the necessary values. It can be overwritten as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extra</span> <span class="o">=</span> <span class="p">{</span><span class="n">TfidfVectorizer</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;separators&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;[.]&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">?&#39;</span><span class="p">,</span>
            <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">!&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">(&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">)&#39;</span><span class="p">]}}</span>
<span class="n">model_onnx</span> <span class="o">=</span> <span class="n">convert_sklearn</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;tfidf&quot;</span><span class="p">,</span>
                             <span class="n">initial_types</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="n">StringTensorType</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))],</span>
                             <span class="n">options</span><span class="o">=</span><span class="n">extra</span><span class="p">)</span>
</pre></div>
</div>
<p>But if a pipeline contains two model of the same class,
it is possible to distinguish between the two with function <em>id</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">extra</span> <span class="o">=</span> <span class="p">{</span><span class="nb">id</span><span class="p">(</span><span class="n">model</span><span class="p">):</span> <span class="p">{</span><span class="s2">&quot;separators&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">?&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">!&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">(&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">)&#39;</span><span class="p">]}}</span>
<span class="n">model_onnx</span> <span class="o">=</span> <span class="n">convert_sklearn</span><span class="p">(</span><span class="n">pipeline</span><span class="p">,</span> <span class="s2">&quot;pipeline-with-2-tfidf&quot;</span><span class="p">,</span>
                             <span class="n">initial_types</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="n">StringTensorType</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))],</span>
                             <span class="n">options</span><span class="o">=</span><span class="n">extra</span><span class="p">)</span>
</pre></div>
</div>
<p>It is used in example <a class="reference internal" href="auto_examples/plot_tfidfvectorizer.html#l-example-tfidfvectorizer"><span class="std std-ref">TfIdfVectorizer with ONNX</span></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.7: </span>Parameter <cite>target_opset</cite>, if not specified, is now set to
the latest tested opset returned by
<a class="reference internal" href="#skl2onnx.get_latest_tested_opset_version" title="skl2onnx.get_latest_tested_opset_version"><code class="xref py py-func docutils literal notranslate"><span class="pre">skl2onnx.get_latest_tested_opset_version()</span></code></a> and
not the version of the <em>onnx</em> package.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.to_onnx">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.</span></span><span class="sig-name descname"><span class="pre">to_onnx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_opset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/convert.html#to_onnx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.to_onnx" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="#skl2onnx.convert_sklearn" title="skl2onnx.convert_sklearn"><code class="xref py py-func docutils literal notranslate"><span class="pre">convert_sklearn()</span></code></a> with simplified parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – model to convert</p></li>
<li><p><strong>X</strong> – training set, can be None, it is used to infered the
input types (<em>initial_types</em>)</p></li>
<li><p><strong>initial_types</strong> – if X is None, then <em>initial_types</em> must be
defined</p></li>
<li><p><strong>target_opset</strong> – conversion with a specific target opset</p></li>
<li><p><strong>options</strong> – specific options given to converters
(see <a class="reference internal" href="parameterized.html#l-conv-options"><span class="std std-ref">Converters with options</span></a>)</p></li>
<li><p><strong>name</strong> – name of the model</p></li>
<li><p><strong>white_op</strong> – white list of ONNX nodes allowed
while converting a pipeline, if empty, all are allowed</p></li>
<li><p><strong>black_op</strong> – black list of ONNX nodes allowed
while converting a pipeline, if empty, none are blacklisted</p></li>
<li><p><strong>final_types</strong> – a python list. Works the same way as initial_types
but not mandatory, it is used to overwrites the type
(if type is not None) and the name of every output.</p></li>
<li><p><strong>dtype</strong> – removed in version 1.7.5, dtype is now inferred from
input types, converters may add operators Cast to switch to
double when it is necessary</p></li>
<li><p><strong>verbose</strong> – display progress while converting a model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>converted model</p>
</dd>
</dl>
<p>This function checks if the model inherits from class
<code class="xref py py-class docutils literal notranslate"><span class="pre">OnnxOperatorMixin</span></code>, it calls method <em>to_onnx</em>
in that case otherwise it calls <a class="reference internal" href="#skl2onnx.convert_sklearn" title="skl2onnx.convert_sklearn"><code class="xref py py-func docutils literal notranslate"><span class="pre">convert_sklearn()</span></code></a>.</p>
</dd></dl>

</div>
<div class="section" id="register-a-new-converter">
<h2><a class="toc-backref" href="#id3">Register a new converter</a><a class="headerlink" href="#register-a-new-converter" title="Permalink to this headline">¶</a></h2>
<p>If a model has no converter
implemented in this package, a new converter has then to be
registered, whether it is imported from another package
or created from scratch. Section <a class="reference internal" href="supported.html#l-converter-list"><span class="std std-ref">Covered Converters</span></a>
lists all available converters.</p>
<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.supported_converters">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.</span></span><span class="sig-name descname"><span class="pre">supported_converters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_sklearn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx.html#supported_converters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.supported_converters" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the list of supported converters.
To find the converter associated to a specific model,
the library gets the name of the model class,
adds <code class="docutils literal notranslate"><span class="pre">'Sklearn'</span></code> as a prefix and retrieves
the associated converter if available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>from_sklearn</strong> – every supported model is mapped to converter
by a name prefixed with <code class="docutils literal notranslate"><span class="pre">'Sklearn'</span></code>, the prefix is removed
if this parameter is False but the function only returns converters
whose name is prefixed by <code class="docutils literal notranslate"><span class="pre">'Sklearn'</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of supported models as string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.update_registered_converter">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.</span></span><span class="sig-name descname"><span class="pre">update_registered_converter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alias</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape_fct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_fct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parser</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/_supported_operators.html#update_registered_converter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.update_registered_converter" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers or updates a converter for a new model so that
it can be converted when inserted in a <em>scikit-learn</em> pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – model class</p></li>
<li><p><strong>alias</strong> – alias used to register the model</p></li>
<li><p><strong>shape_fct</strong> – function which checks or modifies the expected
outputs, this function should be fast so that the whole graph
can be computed followed by the conversion of each model,
parallelized or not</p></li>
<li><p><strong>convert_fct</strong> – function which converts a model</p></li>
<li><p><strong>overwrite</strong> – False to raise exception if a converter
already exists</p></li>
<li><p><strong>parser</strong> – overwrites the parser as well if not empty</p></li>
<li><p><strong>options</strong> – registered options for this converter</p></li>
</ul>
</dd>
</dl>
<p>The alias is usually the library name followed by the model name.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skl2onnx.common.shape_calculator</span> <span class="kn">import</span> <span class="n">calculate_linear_classifier_output_shapes</span>
<span class="kn">from</span> <span class="nn">skl2onnx.operator_converters.RandomForest</span> <span class="kn">import</span> <span class="n">convert_sklearn_random_forest_classifier</span>
<span class="kn">from</span> <span class="nn">skl2onnx</span> <span class="kn">import</span> <span class="n">update_registered_converter</span>
<span class="n">update_registered_converter</span><span class="p">(</span><span class="n">SGDClassifier</span><span class="p">,</span> <span class="s1">&#39;SklearnLinearClassifier&#39;</span><span class="p">,</span>
                            <span class="n">calculate_linear_classifier_output_shapes</span><span class="p">,</span>
                            <span class="n">convert_sklearn_random_forest_classifier</span><span class="p">,</span>
                            <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;zipmap&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;columns&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;raw_scores&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]})</span>
</pre></div>
</div>
<p>The function does not update the parser if not specified except if
option <cite>‘zipmap’</cite> is added to the list. Every classifier
must declare this option to let the default parser
automatically handle that option.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.update_registered_parser">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.</span></span><span class="sig-name descname"><span class="pre">update_registered_parser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parser_fct</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/_parse.html#update_registered_parser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.update_registered_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers or updates a parser for a new model.
A parser returns the expected output of a model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – model class</p></li>
<li><p><strong>parser_fct</strong> – parser, signature is the same as
<a class="reference internal" href="#skl2onnx._parse.parse_sklearn" title="skl2onnx._parse.parse_sklearn"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_sklearn</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="manipulate-onnx-graphs">
<h2><a class="toc-backref" href="#id4">Manipulate ONNX graphs</a><a class="headerlink" href="#manipulate-onnx-graphs" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.helpers.onnx_helper.enumerate_model_node_outputs">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.helpers.onnx_helper.</span></span><span class="sig-name descname"><span class="pre">enumerate_model_node_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/helpers/onnx_helper.html#enumerate_model_node_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.helpers.onnx_helper.enumerate_model_node_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerates all the nodes of a model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – ONNX graph</p></li>
<li><p><strong>add_node</strong> – if False, the function enumerates
all output names from every node, otherwise, it
enumerates tuple (output name, node)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>enumerator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.helpers.onnx_helper.load_onnx_model">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.helpers.onnx_helper.</span></span><span class="sig-name descname"><span class="pre">load_onnx_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">onnx_file_or_bytes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/helpers/onnx_helper.html#load_onnx_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.helpers.onnx_helper.load_onnx_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads an <em>ONNX</em> file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>onnx_file_or_bytes</strong> – <em>ONNX</em> file or bytes</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>ONNX</em> model</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.helpers.onnx_helper.select_model_inputs_outputs">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.helpers.onnx_helper.</span></span><span class="sig-name descname"><span class="pre">select_model_inputs_outputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/helpers/onnx_helper.html#select_model_inputs_outputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.helpers.onnx_helper.select_model_inputs_outputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a model and changes its outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – <em>ONNX</em> model</p></li>
<li><p><strong>inputs</strong> – new inputs</p></li>
<li><p><strong>outputs</strong> – new outputs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>modified model</p>
</dd>
</dl>
<p>The function removes unneeded files.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.helpers.onnx_helper.save_onnx_model">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.helpers.onnx_helper.</span></span><span class="sig-name descname"><span class="pre">save_onnx_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/helpers/onnx_helper.html#save_onnx_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.helpers.onnx_helper.save_onnx_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a model as a file or bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – <em>ONNX</em> model</p></li>
<li><p><strong>filename</strong> – filename or None to return bytes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bytes</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="parsers">
<h2><a class="toc-backref" href="#id5">Parsers</a><a class="headerlink" href="#parsers" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx._parse.parse_sklearn">
<span class="sig-prename descclassname"><span class="pre">skl2onnx._parse.</span></span><span class="sig-name descname"><span class="pre">parse_sklearn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_parsers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/_parse.html#parse_sklearn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx._parse.parse_sklearn" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a delegate function. It does nothing but invokes the
correct parsing function according to the input model’s type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scope</strong> – Scope object</p></li>
<li><p><strong>model</strong> – A scikit-learn object (e.g., OneHotEncoder
and LogisticRegression)</p></li>
<li><p><strong>inputs</strong> – A list of variables</p></li>
<li><p><strong>custom_parsers</strong> – parsers determines which outputs is expected
for which particular task, default parsers are defined for
classifiers, regressors, pipeline but they can be rewritten,
<em>custom_parsers</em> is a dictionary <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">type:</span> <span class="pre">fct_parser(scope,</span>
<span class="pre">model,</span> <span class="pre">inputs,</span> <span class="pre">custom_parsers=None)</span> <span class="pre">}</span></code></p></li>
<li><p><strong>final_types</strong> – a python list. Works the same way as initial_types
but not mandatory, it is used to overwrites the type
(if type is not None) and the name of every output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The output variables produced by the input model</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx._parse.parse_sklearn_model">
<span class="sig-prename descclassname"><span class="pre">skl2onnx._parse.</span></span><span class="sig-name descname"><span class="pre">parse_sklearn_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_opset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_conversion_functions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_shape_calculators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_parsers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/_parse.html#parse_sklearn_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx._parse.parse_sklearn_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Puts <em>scikit-learn</em> object into an abstract container so that
our framework can work seamlessly on models created
with different machine learning tools.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – A scikit-learn model</p></li>
<li><p><strong>initial_types</strong> – a python list. Each element is a tuple of a
variable name and a type defined in data_types.py</p></li>
<li><p><strong>target_opset</strong> – number, for example, 7 for ONNX 1.2,
and 8 for ONNX 1.3.</p></li>
<li><p><strong>custom_conversion_functions</strong> – a dictionary for specifying
the user customized conversion function if not registered</p></li>
<li><p><strong>custom_shape_calculators</strong> – a dictionary for specifying the
user customized shape calculator if not registered</p></li>
<li><p><strong>custom_parsers</strong> – parsers determines which outputs is expected
for which particular task, default parsers are defined for
classifiers, regressors, pipeline but they can be rewritten,
<em>custom_parsers</em> is a dictionary
<code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">type:</span> <span class="pre">fct_parser(scope,</span> <span class="pre">model,</span> <span class="pre">inputs,</span> <span class="pre">custom_parsers=None)</span> <span class="pre">}</span></code></p></li>
<li><p><strong>options</strong> – specific options given to converters
(see <a class="reference internal" href="parameterized.html#l-conv-options"><span class="std std-ref">Converters with options</span></a>)</p></li>
<li><p><strong>white_op</strong> – white list of ONNX nodes allowed
while converting a pipeline, if empty, all are allowed</p></li>
<li><p><strong>black_op</strong> – black list of ONNX nodes allowed
while converting a pipeline, if empty, none are blacklisted</p></li>
<li><p><strong>final_types</strong> – a python list. Works the same way as initial_types
but not mandatory, it is used to overwrites the type
(if type is not None) and the name of every output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#skl2onnx.common._topology.Topology" title="skl2onnx.common._topology.Topology"><code class="xref py py-class docutils literal notranslate"><span class="pre">Topology</span></code></a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="utils-for-contributors">
<h2><a class="toc-backref" href="#id6">Utils for contributors</a><a class="headerlink" href="#utils-for-contributors" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.common.utils.check_input_and_output_numbers">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.common.utils.</span></span><span class="sig-name descname"><span class="pre">check_input_and_output_numbers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">operator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_count_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_count_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onnxconverter_common/utils.html#check_input_and_output_numbers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common.utils.check_input_and_output_numbers" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the number of input(s)/output(s) is correct</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>operator</strong> – A Operator object</p></li>
<li><p><strong>input_count_range</strong> – A list of two integers or an integer. If it’s a list the first/second element is the</p></li>
</ul>
</dd>
</dl>
<p>minimal/maximal number of inputs. If it’s an integer, it is equivalent to specify that number twice in a list. For
infinite ranges like 5 to infinity, you need to use [5, None].
:param output_count_range: A list of two integers or an integer. See input_count_range for its format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skl2onnx.common.utils.check_input_and_output_types">
<span class="sig-prename descclassname"><span class="pre">skl2onnx.common.utils.</span></span><span class="sig-name descname"><span class="pre">check_input_and_output_types</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">operator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">good_input_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">good_output_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onnxconverter_common/utils.html#check_input_and_output_types"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common.utils.check_input_and_output_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the type(s) of input(s)/output(s) is(are) correct</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>operator</strong> – A Operator object</p></li>
<li><p><strong>good_input_types</strong> – A list of allowed input types (e.g., [FloatTensorType, Int64TensorType]) or None. None</p></li>
</ul>
</dd>
</dl>
<p>means that we skip the check of the input types.
:param good_output_types: A list of allowed output types. See good_input_types for its format.</p>
</dd></dl>

</div>
<div class="section" id="concepts">
<h2><a class="toc-backref" href="#id7">Concepts</a><a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h2>
<div class="section" id="containers">
<h3><a class="toc-backref" href="#id8">Containers</a><a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="skl2onnx.common._container.SklearnModelContainerNode">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skl2onnx.common._container.</span></span><span class="sig-name descname"><span class="pre">SklearnModelContainerNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sklearn_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_container.html#SklearnModelContainerNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._container.SklearnModelContainerNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Main container for one <em>scikit-learn</em> model.
Every converter adds nodes to an existing container
which is converted into a <em>ONNX</em> graph by an instance of
<a class="reference internal" href="#skl2onnx.common._topology.Topology" title="skl2onnx.common._topology.Topology"><code class="xref py py-class docutils literal notranslate"><span class="pre">Topology</span></code></a>.</p>
<dl class="py property">
<dt class="sig sig-object py" id="skl2onnx.common._container.SklearnModelContainerNode.input_names">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">input_names</span></span><a class="headerlink" href="#skl2onnx.common._container.SklearnModelContainerNode.input_names" title="Permalink to this definition">¶</a></dt>
<dd><p>This function should return a list of strings. Each string
corresponds to an input variable name.
:return: a list of string</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skl2onnx.common._container.SklearnModelContainerNode.output_names">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">output_names</span></span><a class="headerlink" href="#skl2onnx.common._container.SklearnModelContainerNode.output_names" title="Permalink to this definition">¶</a></dt>
<dd><p>This function should return a list of strings. Each string
corresponds to an output variable name.
:return: a list of string</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skl2onnx.common._container.ModelComponentContainer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skl2onnx.common._container.</span></span><span class="sig-name descname"><span class="pre">ModelComponentContainer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_opset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_models</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_op</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_container.html#ModelComponentContainer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._container.ModelComponentContainer" title="Permalink to this definition">¶</a></dt>
<dd><p>In the conversion phase, this class is used to collect all materials
required to build an <em>ONNX</em> <em>GraphProto</em>, which is encapsulated in a
<em>ONNX</em> <em>ModelProto</em>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="skl2onnx.common._container.ModelComponentContainer.add_initializer">
<span class="sig-name descname"><span class="pre">add_initializer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onnx_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_container.html#ModelComponentContainer.add_initializer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._container.ModelComponentContainer.add_initializer" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a <em>TensorProto</em> into the initializer list of the final
ONNX model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Variable name in the produced ONNX model.</p></li>
<li><p><strong>onnx_type</strong> – Element types allowed in ONNX tensor, e.g.,
TensorProto.FLOAT and TensorProto.STRING.</p></li>
<li><p><strong>shape</strong> – Tensor shape, a list of integers.</p></li>
<li><p><strong>content</strong> – Flattened tensor values (i.e., a float list
or a float array).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>created tensor</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skl2onnx.common._container.ModelComponentContainer.add_input">
<span class="sig-name descname"><span class="pre">add_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_container.html#ModelComponentContainer.add_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._container.ModelComponentContainer.add_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds our <em>Variable</em> object defined _parser.py into the the input
list of the final ONNX model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>variable</strong> – The Variable object to be added</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skl2onnx.common._container.ModelComponentContainer.add_node">
<span class="sig-name descname"><span class="pre">add_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op_domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_container.html#ModelComponentContainer.add_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._container.ModelComponentContainer.add_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a <em>NodeProto</em> into the node list of the final ONNX model.
If the input operator’s domain-version information cannot be
found in our domain-version pool (a Python set), we may add it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op_type</strong> – A string (e.g., Pool and Conv) indicating the
type of the NodeProto</p></li>
<li><p><strong>inputs</strong> – A list of strings. They are the input variables’
names of the considered NodeProto</p></li>
<li><p><strong>outputs</strong> – A list of strings. They are the output
variables’ names of the considered NodeProto</p></li>
<li><p><strong>op_domain</strong> – The domain name (e.g., ai.onnx.ml) of the
operator we are trying to add.</p></li>
<li><p><strong>op_version</strong> – The version number (e.g., 0 and 1) of the
operator we are trying to add.</p></li>
<li><p><strong>name</strong> – name of the node, this name cannot be empty</p></li>
<li><p><strong>attrs</strong> – A Python dictionary. Keys and values are
attributes’ names and attributes’ values,
respectively.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skl2onnx.common._container.ModelComponentContainer.add_output">
<span class="sig-name descname"><span class="pre">add_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_container.html#ModelComponentContainer.add_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._container.ModelComponentContainer.add_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds our <em>Variable</em> object defined <em>_parser.py</em> into the the
output list of the final ONNX model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>variable</strong> – The Variable object to be added</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="nodes">
<h3><a class="toc-backref" href="#id9">Nodes</a><a class="headerlink" href="#nodes" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="skl2onnx.common._topology.Operator">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skl2onnx.common._topology.</span></span><span class="sig-name descname"><span class="pre">Operator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">onnx_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw_operator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_opset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope_inst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_topology.html#Operator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._topology.Operator" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines an operator available in <em>ONNX</em>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="skl2onnx.common._topology.Variable">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skl2onnx.common._topology.</span></span><span class="sig-name descname"><span class="pre">Variable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">onnx_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_topology.html#Variable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._topology.Variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a variable which holds any data defined
from <em>ONNX</em> types.</p>
</dd></dl>

</div>
<div class="section" id="scope">
<h3><a class="toc-backref" href="#id10">Scope</a><a class="headerlink" href="#scope" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="skl2onnx.common._topology.Scope">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skl2onnx.common._topology.</span></span><span class="sig-name descname"><span class="pre">Scope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_scopes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_name_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">operator_name_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_opset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_shape_calculators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_models</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_topology.html#Scope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._topology.Scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Every node of an <em>ONNX</em> graph must be unique. This class holds the list
of existing name for every node already defined in graph. It also
provides functions to create a unique unused name.</p>
<dl class="py method">
<dt class="sig sig-object py" id="skl2onnx.common._topology.Scope.get_unique_operator_name">
<span class="sig-name descname"><span class="pre">get_unique_operator_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_topology.html#Scope.get_unique_operator_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._topology.Scope.get_unique_operator_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a unique operator ID based on the given seed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skl2onnx.common._topology.Scope.get_unique_variable_name">
<span class="sig-name descname"><span class="pre">get_unique_variable_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_topology.html#Scope.get_unique_variable_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._topology.Scope.get_unique_variable_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a unique variable ID based on the given seed.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="topology">
<h3><a class="toc-backref" href="#id11">Topology</a><a class="headerlink" href="#topology" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="skl2onnx.common._topology.Topology">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">skl2onnx.common._topology.</span></span><span class="sig-name descname"><span class="pre">Topology</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reserved_variable_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reserved_operator_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_opset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_conversion_functions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_shape_calculators</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registered_models</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_topology.html#Topology"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._topology.Topology" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds instances on <a class="reference internal" href="#skl2onnx.common._topology.Scope" title="skl2onnx.common._topology.Scope"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scope</span></code></a> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">SklearnModelContainer</span></code>.
These are filled by the converters while a pipeline is being converted.
When all converters were called, method
<a class="reference internal" href="#skl2onnx.common._topology.Topology.compile" title="skl2onnx.common._topology.Topology.compile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Topology.compile</span></code></a>
must be called to convert the topological graph into <em>ONNX</em> graph.</p>
<dl class="py method">
<dt class="sig sig-object py" id="skl2onnx.common._topology.Topology.compile">
<span class="sig-name descname"><span class="pre">compile</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/skl2onnx/common/_topology.html#Topology.compile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skl2onnx.common._topology.Topology.compile" title="Permalink to this definition">¶</a></dt>
<dd><p>This function aims at giving every operator enough information
so that all operator conversions can happen independently. We
also want to check, fix, and simplify the network structure
here.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo_main.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API Summary</a><ul>
<li><a class="reference internal" href="#version">Version</a></li>
<li><a class="reference internal" href="#converters">Converters</a></li>
<li><a class="reference internal" href="#register-a-new-converter">Register a new converter</a></li>
<li><a class="reference internal" href="#manipulate-onnx-graphs">Manipulate ONNX graphs</a></li>
<li><a class="reference internal" href="#parsers">Parsers</a></li>
<li><a class="reference internal" href="#utils-for-contributors">Utils for contributors</a></li>
<li><a class="reference internal" href="#concepts">Concepts</a><ul>
<li><a class="reference internal" href="#containers">Containers</a></li>
<li><a class="reference internal" href="#nodes">Nodes</a></li>
<li><a class="reference internal" href="#scope">Scope</a></li>
<li><a class="reference internal" href="#topology">Topology</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation index</a><ul>
      <li>Previous: <a href="auto_tutorial/plot_wext_pyod_forest.html" title="previous chapter">Converter for pyod.models.iforest.IForest</a></li>
      <li>Next: <a href="auto_examples/index.html" title="next chapter">Gallery of examples</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/api_summary.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2018-2021, Microsoft.
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.1.1.
  </div>
  
  </body>
</html>